{"ast":null,"code":"import _regeneratorRuntime from \"/Users/awe/proj/software/work/intraedge/projects/prok/prok-react-ui/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/awe/proj/software/work/intraedge/projects/prok/prok-react-ui/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/Users/awe/proj/software/work/intraedge/projects/prok/prok-react-ui/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/awe/proj/software/work/intraedge/projects/prok/prok-react-ui/src/components/Auth/Login.js\";\nimport React, { useContext, useState, useEffect } from \"react\"; // import { login } from \"./../../actions/securityActions\";\n\nimport MatchContext from \"./../../store/match-context\";\nimport axios from \"axios\";\nimport PropTypes from \"prop-types\";\nimport classnames from \"classnames\";\naxios.defaults.withCredentials = true;\nexport default function Login(props) {\n  var context = useContext(MatchContext);\n\n  var _useState = useState(\"\"),\n      _useState2 = _slicedToArray(_useState, 2),\n      username = _useState2[0],\n      setUsername = _useState2[1];\n\n  var _useState3 = useState(\"\"),\n      _useState4 = _slicedToArray(_useState3, 2),\n      password = _useState4[0],\n      setPassword = _useState4[1];\n\n  login =\n  /*#__PURE__*/\n  function () {\n    var _ref = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee(loginRequest) {\n      var res;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              loginRequest.withCredentials = true;\n              _context.next = 3;\n              return axios.post(\"//localhost:8080/api/ver0001/auth/sign-in\", loginRequest);\n\n            case 3:\n              res = _context.sent;\n              console.log(\"res 41\", res.data.session);\n              document.cookie = \"sid=\" + JSON.stringify(res.data.session);\n              return _context.abrupt(\"return\", res);\n\n            case 7:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function login(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  function onSubmit(e) {\n    e.preventDefault();\n    var loginRequest = {\n      username: username,\n      password: password\n    };\n    console.log(\"loginRequest 55\", loginRequest); // this.props.login(loginRequest);\n\n    var user = this.login(loginRequest);\n    console.log(\"user 58\", user);\n  } // onChange(e) {\n  //   this.setState({ [e.target.name]: e.target.value });\n  // }\n  // onSubmit(e) {\n  //   e.preventDefault();\n  //   const loginRequest = {\n  //     username: username,\n  //     password: password\n  //   };\n  //   console.log(\"loginRequest 55\", loginRequest);\n  //   // this.props.login(loginRequest);\n  //   const user = this.login(loginRequest);\n  //   console.log(\"user 58\", user);\n  // }\n\n\n  var errors = this.state.errors;\n  return React.createElement(\"div\", {\n    className: \"login\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"row\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"col-md-8 m-auto\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59\n    },\n    __self: this\n  }, React.createElement(\"h1\", {\n    className: \"display-4 text-center\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60\n    },\n    __self: this\n  }, \"Log In\"), React.createElement(\"form\", {\n    onSubmit: this.onSubmit,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"form-group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    type: \"username\",\n    className: classnames(\"form-control form-control-lg\", {\n      \"is-invalid\": errors.username\n    }),\n    placeholder: \"Email Address (Username)\",\n    name: \"username\",\n    value: this.state.username,\n    onChange: this.onChange,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63\n    },\n    __self: this\n  }), errors.username && React.createElement(\"div\", {\n    className: \"invalid-feedback\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74\n    },\n    __self: this\n  }, \" \", errors.username)), React.createElement(\"div\", {\n    className: \"form-group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    type: \"password\",\n    className: classnames(\"form-control form-control-lg\", {\n      \"is-invalid\": errors.password\n    }),\n    placeholder: \"Password\",\n    name: \"password\",\n    value: this.state.password,\n    onChange: this.onChange,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78\n    },\n    __self: this\n  }), errors.password && React.createElement(\"div\", {\n    className: \"invalid-feedback\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89\n    },\n    __self: this\n  }, \" \", errors.password)), React.createElement(\"input\", {\n    type: \"submit\",\n    className: \"btn btn-info btn-block mt-4\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92\n    },\n    __self: this\n  }))))));\n}","map":{"version":3,"sources":["/Users/awe/proj/software/work/intraedge/projects/prok/prok-react-ui/src/components/Auth/Login.js"],"names":["React","useContext","useState","useEffect","MatchContext","axios","PropTypes","classnames","defaults","withCredentials","Login","props","context","username","setUsername","password","setPassword","login","loginRequest","post","res","console","log","data","session","document","cookie","JSON","stringify","onSubmit","e","preventDefault","user","errors","state","onChange"],"mappings":"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","sourcesContent":["import React, { useContext, useState, useEffect } from \"react\";\n// import { login } from \"./../../actions/securityActions\";\nimport MatchContext from \"./../../store/match-context\";\nimport axios from \"axios\";\nimport PropTypes from \"prop-types\";\nimport classnames from \"classnames\";\naxios.defaults.withCredentials = true;\n\nexport default function Login(props) {\n  const context = useContext(MatchContext);\n  const [username, setUsername] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n\n  login = async loginRequest => {\n    loginRequest.withCredentials = true;\n    const res = await axios.post(\n      \"//localhost:8080/api/ver0001/auth/sign-in\",\n      loginRequest\n    );\n    console.log(\"res 41\", res.data.session);\n    document.cookie = \"sid=\" + JSON.stringify(res.data.session);\n\n    return res;\n  };\n\n  function onSubmit(e) {\n    e.preventDefault();\n    const loginRequest = {\n      username: username,\n      password: password\n    };\n    console.log(\"loginRequest 55\", loginRequest);\n    // this.props.login(loginRequest);\n    const user = this.login(loginRequest);\n    console.log(\"user 58\", user);\n  }\n\n  // onChange(e) {\n  //   this.setState({ [e.target.name]: e.target.value });\n  // }\n\n  // onSubmit(e) {\n  //   e.preventDefault();\n  //   const loginRequest = {\n  //     username: username,\n  //     password: password\n  //   };\n  //   console.log(\"loginRequest 55\", loginRequest);\n  //   // this.props.login(loginRequest);\n  //   const user = this.login(loginRequest);\n  //   console.log(\"user 58\", user);\n  // }\n\n  const { errors } = this.state;\n  return (\n    <div className=\"login\">\n      <div className=\"container\">\n        <div className=\"row\">\n          <div className=\"col-md-8 m-auto\">\n            <h1 className=\"display-4 text-center\">Log In</h1>\n            <form onSubmit={this.onSubmit}>\n              <div className=\"form-group\">\n                <input\n                  type=\"username\"\n                  className={classnames(\"form-control form-control-lg\", {\n                    \"is-invalid\": errors.username\n                  })}\n                  placeholder=\"Email Address (Username)\"\n                  name=\"username\"\n                  value={this.state.username}\n                  onChange={this.onChange}\n                />\n                {errors.username && (\n                  <div className=\"invalid-feedback\"> {errors.username}</div>\n                )}\n              </div>\n              <div className=\"form-group\">\n                <input\n                  type=\"password\"\n                  className={classnames(\"form-control form-control-lg\", {\n                    \"is-invalid\": errors.password\n                  })}\n                  placeholder=\"Password\"\n                  name=\"password\"\n                  value={this.state.password}\n                  onChange={this.onChange}\n                />\n                {errors.password && (\n                  <div className=\"invalid-feedback\"> {errors.password}</div>\n                )}\n              </div>\n              <input type=\"submit\" className=\"btn btn-info btn-block mt-4\" />\n            </form>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}