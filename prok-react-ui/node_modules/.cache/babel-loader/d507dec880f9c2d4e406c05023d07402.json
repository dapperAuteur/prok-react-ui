{"ast":null,"code":"import _regeneratorRuntime from \"/Users/awe/proj/software/work/intraedge/projects/prok/prok-react-ui/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/awe/proj/software/work/intraedge/projects/prok/prok-react-ui/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/Users/awe/proj/software/work/intraedge/projects/prok/prok-react-ui/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/awe/proj/software/work/intraedge/projects/prok/prok-react-ui/src/components/Auth/Login.js\";\nimport React, { useContext, useState, useEffect, useRef } from \"react\"; // import { login } from \"./../../actions/securityActions\";\n\nimport MatchContext from \"./../../store/match-context\";\nimport axios from \"axios\";\nimport PropTypes from \"prop-types\";\nimport classnames from \"classnames\";\naxios.defaults.withCredentials = true;\nexport default function Login(props) {\n  var context = useContext(MatchContext); // const [username, setUsername] = useState(\"\");\n\n  var _useState = useState(\"\"),\n      _useState2 = _slicedToArray(_useState, 2),\n      password = _useState2[0],\n      setPassword = _useState2[1];\n\n  var _useState3 = useState({}),\n      _useState4 = _slicedToArray(_useState3, 2),\n      errors = _useState4[0],\n      setErrors = _useState4[1];\n\n  var username = useRef(null);\n\n  var login =\n  /*#__PURE__*/\n  function () {\n    var _ref = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee(loginRequest) {\n      var res;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              loginRequest.withCredentials = true;\n              _context.next = 3;\n              return axios.post(\"//localhost:8080/api/ver0001/auth/sign-in\", loginRequest);\n\n            case 3:\n              res = _context.sent;\n              console.log(\"res 41\", res.data.session);\n              document.cookie = \"sid=\" + JSON.stringify(res.data.session);\n              return _context.abrupt(\"return\", res);\n\n            case 7:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function login(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  function onSubmit(e) {\n    e.preventDefault();\n    var loginRequest = {\n      username: username,\n      password: password\n    };\n    console.log(\"loginRequest 55\", loginRequest); // this.props.login(loginRequest);\n\n    var user = login(loginRequest);\n    console.log(\"user 58\", user);\n  } // onChange(e) {\n  //   this.setState({ [e.target.name]: e.target.value });\n  // }\n  // onSubmit(e) {\n  //   e.preventDefault();\n  //   const loginRequest = {\n  //     username: username,\n  //     password: password\n  //   };\n  //   console.log(\"loginRequest 55\", loginRequest);\n  //   // this.props.login(loginRequest);\n  //   const user = this.login(loginRequest);\n  //   console.log(\"user 58\", user);\n  // }\n  // const { errors } = this.state;\n\n\n  return React.createElement(\"div\", {\n    className: \"login\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"row\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"col-md-8 m-auto\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61\n    },\n    __self: this\n  }, React.createElement(\"h1\", {\n    className: \"display-4 text-center\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62\n    },\n    __self: this\n  }, \"Log In\"), React.createElement(\"form\", {\n    onSubmit: onSubmit,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"form-group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    type: \"username\",\n    className: classnames(\"form-control form-control-lg\", {\n      \"is-invalid\": errors.username\n    }),\n    placeholder: \"Email Address (Username)\",\n    name: \"username\" // value={username}\n    ,\n    ref: username,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65\n    },\n    __self: this\n  }), errors.username && React.createElement(\"div\", {\n    className: \"invalid-feedback\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76\n    },\n    __self: this\n  }, \" \", errors.username)), React.createElement(\"div\", {\n    className: \"form-group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    type: \"password\",\n    className: classnames(\"form-control form-control-lg\", {\n      \"is-invalid\": errors.password\n    }),\n    placeholder: \"Password\",\n    name: \"password\",\n    value: password,\n    onChange: setPassword,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80\n    },\n    __self: this\n  }), errors.password && React.createElement(\"div\", {\n    className: \"invalid-feedback\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91\n    },\n    __self: this\n  }, \" \", errors.password)), React.createElement(\"input\", {\n    type: \"submit\",\n    className: \"btn btn-info btn-block mt-4\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94\n    },\n    __self: this\n  }))))));\n}","map":{"version":3,"sources":["/Users/awe/proj/software/work/intraedge/projects/prok/prok-react-ui/src/components/Auth/Login.js"],"names":["React","useContext","useState","useEffect","useRef","MatchContext","axios","PropTypes","classnames","defaults","withCredentials","Login","props","context","password","setPassword","errors","setErrors","username","login","loginRequest","post","res","console","log","data","session","document","cookie","JSON","stringify","onSubmit","e","preventDefault","user"],"mappings":"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","sourcesContent":["import React, { useContext, useState, useEffect, useRef } from \"react\";\n// import { login } from \"./../../actions/securityActions\";\nimport MatchContext from \"./../../store/match-context\";\nimport axios from \"axios\";\nimport PropTypes from \"prop-types\";\nimport classnames from \"classnames\";\naxios.defaults.withCredentials = true;\n\nexport default function Login(props) {\n  const context = useContext(MatchContext);\n  // const [username, setUsername] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [errors, setErrors] = useState({});\n  const username = useRef(null);\n\n  const login = async loginRequest => {\n    loginRequest.withCredentials = true;\n    const res = await axios.post(\n      \"//localhost:8080/api/ver0001/auth/sign-in\",\n      loginRequest\n    );\n    console.log(\"res 41\", res.data.session);\n    document.cookie = \"sid=\" + JSON.stringify(res.data.session);\n\n    return res;\n  };\n\n  function onSubmit(e) {\n    e.preventDefault();\n    const loginRequest = {\n      username: username,\n      password: password\n    };\n    console.log(\"loginRequest 55\", loginRequest);\n    // this.props.login(loginRequest);\n    const user = login(loginRequest);\n    console.log(\"user 58\", user);\n  }\n\n  // onChange(e) {\n  //   this.setState({ [e.target.name]: e.target.value });\n  // }\n\n  // onSubmit(e) {\n  //   e.preventDefault();\n  //   const loginRequest = {\n  //     username: username,\n  //     password: password\n  //   };\n  //   console.log(\"loginRequest 55\", loginRequest);\n  //   // this.props.login(loginRequest);\n  //   const user = this.login(loginRequest);\n  //   console.log(\"user 58\", user);\n  // }\n\n  // const { errors } = this.state;\n  return (\n    <div className=\"login\">\n      <div className=\"container\">\n        <div className=\"row\">\n          <div className=\"col-md-8 m-auto\">\n            <h1 className=\"display-4 text-center\">Log In</h1>\n            <form onSubmit={onSubmit}>\n              <div className=\"form-group\">\n                <input\n                  type=\"username\"\n                  className={classnames(\"form-control form-control-lg\", {\n                    \"is-invalid\": errors.username\n                  })}\n                  placeholder=\"Email Address (Username)\"\n                  name=\"username\"\n                  // value={username}\n                  ref={username}\n                />\n                {errors.username && (\n                  <div className=\"invalid-feedback\"> {errors.username}</div>\n                )}\n              </div>\n              <div className=\"form-group\">\n                <input\n                  type=\"password\"\n                  className={classnames(\"form-control form-control-lg\", {\n                    \"is-invalid\": errors.password\n                  })}\n                  placeholder=\"Password\"\n                  name=\"password\"\n                  value={password}\n                  onChange={setPassword}\n                />\n                {errors.password && (\n                  <div className=\"invalid-feedback\"> {errors.password}</div>\n                )}\n              </div>\n              <input type=\"submit\" className=\"btn btn-info btn-block mt-4\" />\n            </form>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}