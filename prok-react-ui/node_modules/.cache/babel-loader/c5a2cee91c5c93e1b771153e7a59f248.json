{"ast":null,"code":"import _regeneratorRuntime from \"/Users/awe/proj/software/work/intraedge/projects/prok/prok-react-ui/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/awe/proj/software/work/intraedge/projects/prok/prok-react-ui/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/Users/awe/proj/software/work/intraedge/projects/prok/prok-react-ui/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/awe/proj/software/work/intraedge/projects/prok/prok-react-ui/src/components/Auth/Login.js\";\nimport React, { useContext, useState, useRef } from \"react\"; // import { login } from \"./../../actions/securityActions\";\n\nimport MatchContext from \"./../../store/match-context\";\nimport axios from \"axios\";\nimport PropTypes from \"prop-types\";\nimport classnames from \"classnames\";\naxios.defaults.withCredentials = true;\nexport default function Login(props) {\n  var context = useContext(MatchContext);\n\n  var _useState = useState({}),\n      _useState2 = _slicedToArray(_useState, 2),\n      errors = _useState2[0],\n      setErrors = _useState2[1];\n\n  var username = useRef(null);\n  var password = useRef(null); // console.log(\"context\", context);\n\n  var login =\n  /*#__PURE__*/\n  function () {\n    var _ref = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee(loginRequest) {\n      var res;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              loginRequest.withCredentials = true;\n              _context.next = 3;\n              return axios.post(\"//localhost:8080/api/ver0001/auth/sign-in\", loginRequest);\n\n            case 3:\n              res = _context.sent;\n              // console.log(\"res 41\", res.data.session);\n              document.cookie = \"sid=\" + JSON.stringify(res.data.session);\n              context.setUser(res.data.session.user);\n              return _context.abrupt(\"return\", res);\n\n            case 7:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function login(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  function onSubmit(e) {\n    e.preventDefault();\n    var loginRequest = {\n      username: username.current.value,\n      password: password.current.value\n    }; // console.log(\"loginRequest 55\", loginRequest);\n\n    var user = login(loginRequest); // console.log(\"user 58\", user);\n  }\n\n  return React.createElement(\"div\", {\n    className: \"login\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"row\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"col-md-8 m-auto\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44\n    },\n    __self: this\n  }, React.createElement(\"h1\", {\n    className: \"display-4 text-center\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45\n    },\n    __self: this\n  }, \"Log In\"), React.createElement(\"form\", {\n    onSubmit: onSubmit,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"form-group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    type: \"username\",\n    className: classnames(\"form-control form-control-lg\", {\n      \"is-invalid\": errors.username\n    }),\n    placeholder: \"Email Address (Username)\",\n    name: \"username\",\n    ref: username,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48\n    },\n    __self: this\n  }), errors.username && React.createElement(\"div\", {\n    className: \"invalid-feedback\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58\n    },\n    __self: this\n  }, \" \", errors.username)), React.createElement(\"div\", {\n    className: \"form-group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    type: \"password\",\n    className: classnames(\"form-control form-control-lg\", {\n      \"is-invalid\": errors.password\n    }),\n    placeholder: \"Password\",\n    name: \"password\",\n    ref: password,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62\n    },\n    __self: this\n  }), errors.password && React.createElement(\"div\", {\n    className: \"invalid-feedback\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72\n    },\n    __self: this\n  }, \" \", errors.password)), React.createElement(\"input\", {\n    type: \"submit\",\n    className: \"btn btn-info btn-block mt-4\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75\n    },\n    __self: this\n  }))))));\n}","map":{"version":3,"sources":["/Users/awe/proj/software/work/intraedge/projects/prok/prok-react-ui/src/components/Auth/Login.js"],"names":["React","useContext","useState","useRef","MatchContext","axios","PropTypes","classnames","defaults","withCredentials","Login","props","context","errors","setErrors","username","password","login","loginRequest","post","res","document","cookie","JSON","stringify","data","session","setUser","user","onSubmit","e","preventDefault","current","value"],"mappings":"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","sourcesContent":["import React, { useContext, useState, useRef } from \"react\";\n// import { login } from \"./../../actions/securityActions\";\nimport MatchContext from \"./../../store/match-context\";\nimport axios from \"axios\";\nimport PropTypes from \"prop-types\";\nimport classnames from \"classnames\";\naxios.defaults.withCredentials = true;\n\nexport default function Login(props) {\n  const context = useContext(MatchContext);\n  const [errors, setErrors] = useState({});\n  const username = useRef(null);\n  const password = useRef(null);\n  // console.log(\"context\", context);\n\n  const login = async loginRequest => {\n    loginRequest.withCredentials = true;\n    const res = await axios.post(\n      \"//localhost:8080/api/ver0001/auth/sign-in\",\n      loginRequest\n    );\n    // console.log(\"res 41\", res.data.session);\n    document.cookie = \"sid=\" + JSON.stringify(res.data.session);\n    context.setUser(res.data.session.user);\n\n    return res;\n  };\n\n  function onSubmit(e) {\n    e.preventDefault();\n    const loginRequest = {\n      username: username.current.value,\n      password: password.current.value\n    };\n    // console.log(\"loginRequest 55\", loginRequest);\n    const user = login(loginRequest);\n    // console.log(\"user 58\", user);\n  }\n\n  return (\n    <div className=\"login\">\n      <div className=\"container\">\n        <div className=\"row\">\n          <div className=\"col-md-8 m-auto\">\n            <h1 className=\"display-4 text-center\">Log In</h1>\n            <form onSubmit={onSubmit}>\n              <div className=\"form-group\">\n                <input\n                  type=\"username\"\n                  className={classnames(\"form-control form-control-lg\", {\n                    \"is-invalid\": errors.username\n                  })}\n                  placeholder=\"Email Address (Username)\"\n                  name=\"username\"\n                  ref={username}\n                />\n                {errors.username && (\n                  <div className=\"invalid-feedback\"> {errors.username}</div>\n                )}\n              </div>\n              <div className=\"form-group\">\n                <input\n                  type=\"password\"\n                  className={classnames(\"form-control form-control-lg\", {\n                    \"is-invalid\": errors.password\n                  })}\n                  placeholder=\"Password\"\n                  name=\"password\"\n                  ref={password}\n                />\n                {errors.password && (\n                  <div className=\"invalid-feedback\"> {errors.password}</div>\n                )}\n              </div>\n              <input type=\"submit\" className=\"btn btn-info btn-block mt-4\" />\n            </form>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}